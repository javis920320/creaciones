https://www.youtube.com/watch?v=tnA2yc47gxg---- destroy table



/select idproceso,pd.factura,tp.nomtipoprod,pr.nomprod,p1.cantidad,sysdate(),p1.precio
 from proceso p1
inner join producto pr on pr.id_prod=p1.id_prod 
inner join tipo_producto tp on tp.idtipoprod=pr.idtipoprod
inner join pedido pd on pd.idpedido=p1.idpedido
inner join trabajador tr on tr.idtrabajador=p1.idtrabajador
inner join persona pe on pe.idpersona =tr.idpersona
where  pe.idpersona=1;



/*insert into proceso values(null,'10','1',sysdate(),70,59,1,(select(p. subvalor*10) from precio p 
inner join producto pr on pr.id_prod=p.id_prod where pr.id_prod=70 limit 1) );





DELIMITER $$
CREATE DEFINER=`root`@`localhost` PROCEDURE `PA_INGRESARPROCES`(IN `cantidad` INT, IN `idtrabajador` INT, IN `idprod` INT, IN `idpedido` INT)
    NO SQL
    COMMENT 'procedimiento para ingresar un proceso de operario'
insert into proceso values(null,cantidad,'1',sysdate(),idprod,idpedido,idtrabajador,(select(p. subvalor*cantidad) from precio p 
inner join producto pr on pr.id_prod=p.id_prod where pr.id_prod=idprod and p.estado=1 limit 1) )$$
DELIMITER ;


--->para  calcular los productos  disponibles  en procesos
DELIMITER $$
CREATE DEFINER=`root`@`localhost` PROCEDURE `PA_CALCULARDISPONIBLES`(IN `idpedido` INT)
    NO SQL
    COMMENT 'para  calcular los productos  disponibles  en procesos'
select (select p.cantidad  from pedido p where p.idpedido=idpedido )-sum(pr.cantidad)  from proceso pr where pr.idpedido=idpedido$$
DELIMITER ;


---- modificar este  campon en proceso almacenado
insert into proceso values(null,cantidad,'1',sysdate(),idprod,idpedido,idtrabajador,(select(p. subvalor*cantidad) from precio p 
inner join producto pr on pr.id_prod=p.id_prod where pr.id_prod=idprod and p.estado=1 limit 1),(select(p.valor*cantidad) from precio p 
inner join producto pr on pr.id_prod=p.id_prod where pr.id_prod=idprod and p.estado=1 limit 1) )


--->agregar campo precio1 en tabla proceso


select pr.idproceso,pd.factura,p.nomprod,pd.descripcion,pr.cantidad,pr.precio,pr.precio1 from proceso pr 
inner join producto p on p.id_prod=pr.id_prod
inner join pedido pd  on pd.idpedido=pr.idpedido ;